<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PGV ‚Äî Admin</title>
  <style>
    body { font-family: "Segoe UI", sans-serif; background:#0f0f0f; color:#fff; margin:0; padding:20px; }
    h1 { text-align:center; color:#ff0000; }
    form { max-width:600px; margin:20px auto; background:#1c1c1c; padding:20px; border-radius:10px; }
    input { width:100%; padding:10px; margin:8px 0; border-radius:6px; border:none; background:#0f0f0f; color:#fff; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02); }
    button { background:#ff0000; color:#fff; border:none; padding:10px 14px; border-radius:6px; cursor:pointer; font-weight:600; }
    .muted { color:#9aa3a8; text-align:center; margin-top:10px; }
    .message { text-align:center; margin-top:12px; }
    .error { color:#ff9a9a; }
    .success { color:#9ae6b4; }
    .top-links { text-align:center; margin-bottom:14px; }
    .top-links a { color:#ff5555; text-decoration:none; margin:0 10px; }
  </style>
</head>
<body>
  <h1>üõ†Ô∏è Admin panel</h1>
  <div class="top-links">
    <a href="index.html">Zpƒõt na domov</a>
    <a href="videa.html">Str√°nka vide√≠</a>
  </div>

  <form id="videoForm" aria-label="P≈ôidat video">
    <input id="title" type="text" placeholder="N√°zev videa" required />
    <input id="url" type="text" placeholder="Odkaz na YouTube (https://...)" required />
    <button type="submit">P≈ôidat video</button>
  </form>

  <div id="message" class="message muted" role="status" aria-live="polite"></div>

  <script>
    (function () {
      const form = document.getElementById('videoForm');
      const message = document.getElementById('message');

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        message.className = 'message muted';
        message.textContent = 'Odes√≠l√°m‚Ä¶';

        const title = document.getElementById('title').value.trim();
        const url = document.getElementById('url').value.trim();
        if (!title || !url) {
          message.className = 'message error';
          message.textContent = 'Vypl≈à pros√≠m n√°zev i URL videa.';
          return;
        }

        try {
          const res = await fetch('/add-video', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ title, url })
          });

          const text = await res.text().catch(()=> '');

          if (res.ok) {
            message.className = 'message success';
            message.textContent = '‚úÖ Video bylo p≈ôid√°no. Probƒõhne p≈ôesmƒõrov√°n√≠...';
            // mal√° prodleva, aby u≈æivatel vidƒõl zpr√°vu, pak p≈ôesmƒõrujeme na videa.html
            setTimeout(() => {
              // pokud u≈æ m√°≈° videa.html, p≈ôesmƒõruj na ni; jinak na index.html
              location.href = 'videa.html';
            }, 900);
          } else {
            message.className = 'message error';
            message.textContent = '‚ùå Chyba p≈ôi ukl√°d√°n√≠: ' + (text || ('HTTP ' + res.status));
            console.error('Server response:', res.status, text);
          }
        } catch (err) {
          message.className = 'message error';
          message.textContent = '‚ùå S√≠≈•ov√° chyba: ' + (err.message || err);
          console.error(err);
        }
      });
    })();
  </script>
</body>
</html>
